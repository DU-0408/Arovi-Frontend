{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import axios from'axios';import ReactMarkdown from'react-markdown';import Login from'./Login';import Register from'./Register';import LanguageSelector from'./LanguageSelector';import Settings from'./Settings';import{languages,getTranslation}from'./languages';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[isLoginLoading,setIsLoginLoading]=useState(false);const[loginError,setLoginError]=useState('');const[showRegister,setShowRegister]=useState(false);const[isRegisterLoading,setIsRegisterLoading]=useState(false);const[registerError,setRegisterError]=useState('');const[currentLanguage,setCurrentLanguage]=useState(languages[0]);// Default to English\nconst[showLanguageSelector,setShowLanguageSelector]=useState(false);const[showSettings,setShowSettings]=useState(false);const[isFirstTimeUser,setIsFirstTimeUser]=useState(false);const[messages,setMessages]=useState([]);const[inputText,setInputText]=useState('');const[isLoading,setIsLoading]=useState(false);const[selectedImage,setSelectedImage]=useState(null);const[showPrescriptionForm,setShowPrescriptionForm]=useState(false);const[patientAge,setPatientAge]=useState('');const[patientConditions,setPatientConditions]=useState('');const[isPrescriptionLoading,setIsPrescriptionLoading]=useState(false);const[chatSessions,setChatSessions]=useState([]);const[currentSessionId,setCurrentSessionId]=useState(null);const[currentSessionName,setCurrentSessionName]=useState('');const[user,setUser]=useState(null);const[showSessionSelector,setShowSessionSelector]=useState(false);const fileInputRef=useRef(null);// Configure axios defaults\nuseEffect(()=>{const token=localStorage.getItem('access_token');if(token){axios.defaults.headers.common['Authorization']=`Bearer ${token}`;setIsAuthenticated(true);fetchUserInfo();fetchChatSessions();}},[]);// Initialize language and check for first-time user\nuseEffect(()=>{const savedLanguage=localStorage.getItem('user_language');if(savedLanguage){const language=languages.find(lang=>lang.code===savedLanguage);if(language){setCurrentLanguage(language);}}else if(isAuthenticated){// Show language selector for first-time authenticated users\nsetIsFirstTimeUser(true);setShowLanguageSelector(true);}},[isAuthenticated]);const fetchUserInfo=async()=>{try{// For now, we'll get user info from the login response\n// In a real app, you'd have a /me endpoint\nconst userInfo=localStorage.getItem('user_info');if(userInfo){setUser(JSON.parse(userInfo));}}catch(error){console.error('Error fetching user info:',error);}};const fetchChatSessions=async()=>{try{const response=await axios.get('http://localhost:8000/chat/sessions');setChatSessions(response.data);}catch(error){console.error('Error fetching chat sessions:',error);}};const handleLogin=async(email,password)=>{setIsLoginLoading(true);setLoginError('');try{const formData=new FormData();formData.append('email',email);formData.append('password',password);const response=await axios.post('http://localhost:8000/auth/login',formData);const{access_token,user:userInfo}=response.data;// Store token and user info\nlocalStorage.setItem('access_token',access_token);localStorage.setItem('user_info',JSON.stringify(userInfo));// Set axios default header\naxios.defaults.headers.common['Authorization']=`Bearer ${access_token}`;setIsAuthenticated(true);setUser(userInfo);setLoginError('');// Fetch chat sessions\nawait fetchChatSessions();}catch(error){var _error$response,_error$response$data;console.error('Login error:',error);setLoginError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||'Login failed. Please try again.');}setIsLoginLoading(false);};const handleRegister=async(email,password,fullName)=>{setIsRegisterLoading(true);setRegisterError('');try{const formData=new FormData();formData.append('email',email);formData.append('password',password);formData.append('full_name',fullName);const response=await axios.post('http://localhost:8000/auth/register',formData);const{access_token,user:userInfo}=response.data;// Store token and user info\nlocalStorage.setItem('access_token',access_token);localStorage.setItem('user_info',JSON.stringify(userInfo));// Set axios default header\naxios.defaults.headers.common['Authorization']=`Bearer ${access_token}`;setIsAuthenticated(true);setUser(userInfo);setRegisterError('');setShowRegister(false);// Check if this is a first-time user\nconst savedLanguage=localStorage.getItem('user_language');if(!savedLanguage){setIsFirstTimeUser(true);setShowLanguageSelector(true);}// Fetch chat sessions\nawait fetchChatSessions();}catch(error){var _error$response2,_error$response2$data;console.error('Registration error:',error);setRegisterError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||'Registration failed. Please try again.');}setIsRegisterLoading(false);};const handleLanguageSelect=language=>{setCurrentLanguage(language);localStorage.setItem('user_language',language.code);setShowLanguageSelector(false);setIsFirstTimeUser(false);};const handleLanguageChange=language=>{setCurrentLanguage(language);localStorage.setItem('user_language',language.code);};const handleSettingsClose=()=>{setShowSettings(false);};const handleEmailChange=newEmail=>{// Update user email (in a real app, this would call an API)\nif(user){const updatedUser={...user,email:newEmail};setUser(updatedUser);localStorage.setItem('user_info',JSON.stringify(updatedUser));}};const handlePasswordChange=(currentPassword,newPassword)=>{// Update password (in a real app, this would call an API)\nconsole.log('Password change requested');};// Translation helper function\nconst t=key=>getTranslation(currentLanguage.code,key);const handleLogout=()=>{localStorage.removeItem('access_token');localStorage.removeItem('user_info');delete axios.defaults.headers.common['Authorization'];setIsAuthenticated(false);setUser(null);setMessages([]);setInputText('');setSelectedImage(null);setShowPrescriptionForm(false);setChatSessions([]);setCurrentSessionId(null);setCurrentSessionName('');};const createNewSession=async()=>{try{const formData=new FormData();formData.append('session_name','New Chat');const response=await axios.post('http://localhost:8000/chat/sessions',formData);const newSession=response.data;setCurrentSessionId(newSession.id);setCurrentSessionName(newSession.session_name);setMessages([]);setShowSessionSelector(false);// Refresh sessions list\nawait fetchChatSessions();}catch(error){console.error('Error creating new session:',error);}};const loadSession=async(sessionId,sessionName)=>{try{const response=await axios.get(`http://localhost:8000/chat/sessions/${sessionId}/messages`);const sessionMessages=response.data.map(msg=>({id:msg.id.toString(),text:msg.content,isUser:msg.is_user,timestamp:new Date(msg.created_at),isPrescription:msg.is_prescription}));setMessages(sessionMessages);setCurrentSessionId(sessionId);setCurrentSessionName(sessionName);setShowSessionSelector(false);}catch(error){console.error('Error loading session:',error);}};const sendMessage=async()=>{if(!inputText.trim()&&!selectedImage)return;const userMessage={id:Date.now().toString(),text:inputText,isUser:true,timestamp:new Date(),image:selectedImage?URL.createObjectURL(selectedImage):undefined};setMessages(prev=>[...prev,userMessage]);setIsLoading(true);try{const formData=new FormData();formData.append('message',inputText);if(selectedImage){formData.append('image',selectedImage);}if(currentSessionId){formData.append('session_id',currentSessionId.toString());}const response=await axios.post('http://localhost:8000/chat/',formData);const aiMessage={id:(Date.now()+1).toString(),text:response.data.response,isUser:false,timestamp:new Date(),isPrescription:response.data.is_prescription_query};setMessages(prev=>[...prev,aiMessage]);// Update session info if this is a new session\nif(response.data.session_id&&!currentSessionId){setCurrentSessionId(response.data.session_id);setCurrentSessionName(response.data.session_name);await fetchChatSessions();}}catch(error){console.error('Error sending message:',error);const errorMessage={id:(Date.now()+1).toString(),text:'Sorry, there was an error processing your request. Please try again.',isUser:false,timestamp:new Date()};setMessages(prev=>[...prev,errorMessage]);}finally{setIsLoading(false);setInputText('');setSelectedImage(null);}};const analyzePrescription=async()=>{if(!selectedImage)return;setIsPrescriptionLoading(true);try{const formData=new FormData();formData.append('image',selectedImage);if(patientAge)formData.append('patient_age',patientAge);if(patientConditions)formData.append('patient_conditions',patientConditions);if(currentSessionId){formData.append('session_id',currentSessionId.toString());}const response=await axios.post('http://localhost:8000/prescription-analysis/',formData);const userMessage={id:Date.now().toString(),text:`Prescription Analysis Request${patientAge?` (Age: ${patientAge})`:''}${patientConditions?` (Conditions: ${patientConditions})`:''}`,isUser:true,timestamp:new Date(),image:URL.createObjectURL(selectedImage),isPrescription:true};const aiMessage={id:(Date.now()+1).toString(),text:response.data.response,isUser:false,timestamp:new Date(),isPrescription:true};setMessages(prev=>[...prev,userMessage,aiMessage]);setShowPrescriptionForm(false);setSelectedImage(null);setPatientAge('');setPatientConditions('');// Update session info if this is a new session\nif(response.data.session_id&&!currentSessionId){setCurrentSessionId(response.data.session_id);setCurrentSessionName(response.data.session_name);await fetchChatSessions();}}catch(error){console.error('Error analyzing prescription:',error);const errorMessage={id:(Date.now()+1).toString(),text:'Sorry, there was an error analyzing the prescription. Please try again or consult with a pharmacist.',isUser:false,timestamp:new Date(),isPrescription:true};setMessages(prev=>[...prev,errorMessage]);}finally{setIsPrescriptionLoading(false);}};const handleImageSelect=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(file){setSelectedImage(file);}};const removeSelectedImage=()=>{setSelectedImage(null);if(fileInputRef.current){fileInputRef.current.value='';}};const handleKeyPress=event=>{if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();sendMessage();}};if(!isAuthenticated){if(showRegister){return/*#__PURE__*/_jsx(Register,{onRegister:handleRegister,onSwitchToLogin:()=>setShowRegister(false),isLoading:isRegisterLoading,error:registerError,currentLanguage:currentLanguage,t:t});}return/*#__PURE__*/_jsx(Login,{onLogin:handleLogin,onSwitchToRegister:()=>setShowRegister(true),isLoading:isLoginLoading,error:loginError,currentLanguage:currentLanguage,t:t});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-header\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:t('loginTitle')}),/*#__PURE__*/_jsx(\"p\",{children:\"Ask me about your child's health concerns & medication safety\"}),user&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',opacity:0.8,marginTop:'5px'},children:[\"Welcome, \",user.full_name]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowLanguageSelector(true),style:{background:'rgba(255, 255, 255, 0.1)',border:'1px solid rgba(255, 255, 255, 0.2)',color:'white',padding:'8px 16px',borderRadius:'8px',cursor:'pointer',fontSize:'12px',transition:'all 0.2s'},onMouseOver:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.2)';},onMouseOut:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.1)';},children:[\"\\uD83C\\uDF0D \",currentLanguage.nativeName]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSettings(true),style:{background:'rgba(255, 255, 255, 0.1)',border:'1px solid rgba(255, 255, 255, 0.2)',color:'white',padding:'8px 16px',borderRadius:'8px',cursor:'pointer',fontSize:'12px',transition:'all 0.2s'},onMouseOver:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.2)';},onMouseOut:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.1)';},children:\"\\u2699\\uFE0F Settings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSessionSelector(!showSessionSelector),style:{background:'rgba(255, 255, 255, 0.1)',border:'1px solid rgba(255, 255, 255, 0.2)',color:'white',padding:'8px 16px',borderRadius:'8px',cursor:'pointer',fontSize:'12px',transition:'all 0.2s'},onMouseOver:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.2)';},onMouseOut:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.1)';},children:\"\\uD83D\\uDCAC Sessions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPrescriptionForm(!showPrescriptionForm),style:{background:'rgba(255, 255, 255, 0.1)',border:'1px solid rgba(255, 255, 255, 0.2)',color:'white',padding:'8px 16px',borderRadius:'8px',cursor:'pointer',fontSize:'12px',transition:'all 0.2s'},onMouseOver:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.2)';},onMouseOut:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.1)';},children:\"\\uD83D\\uDCCB Prescription Analysis\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{background:'rgba(255, 255, 255, 0.1)',border:'1px solid rgba(255, 255, 255, 0.2)',color:'white',padding:'8px 16px',borderRadius:'8px',cursor:'pointer',fontSize:'12px',transition:'all 0.2s'},onMouseOver:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.2)';},onMouseOut:e=>{e.currentTarget.style.background='rgba(255, 255, 255, 0.1)';},children:\"Logout\"})]})]}),currentSessionName&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px',textAlign:'left'},children:/*#__PURE__*/_jsxs(\"span\",{style:{background:'rgba(255, 255, 255, 0.1)',padding:'4px 8px',borderRadius:'4px',fontSize:'12px'},children:[\"Current Session: \",currentSessionName]})})]}),showSessionSelector&&/*#__PURE__*/_jsx(\"div\",{className:\"session-selector\",children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#2d2d3f',padding:'20px',borderBottom:'1px solid #3a3a4f',maxHeight:'300px',overflowY:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#ffffff',margin:0},children:\"Chat Sessions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:createNewSession,style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',border:'none',padding:'8px 16px',borderRadius:'6px',cursor:'pointer',fontSize:'12px'},children:\"+ New Session\"})]}),chatSessions.length===0?/*#__PURE__*/_jsx(\"p\",{style:{color:'#b8b8b8',textAlign:'center'},children:\"No chat sessions yet. Start a new conversation!\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'10px'},children:chatSessions.map(session=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>loadSession(session.id,session.session_name),style:{background:session.id===currentSessionId?'rgba(102, 126, 234, 0.2)':'#3a3a4f',padding:'12px',borderRadius:'8px',cursor:'pointer',border:session.id===currentSessionId?'1px solid #667eea':'1px solid #4a4a5f',transition:'all 0.2s'},onMouseOver:e=>{if(session.id!==currentSessionId){e.currentTarget.style.background='#4a4a5f';}},onMouseOut:e=>{if(session.id!==currentSessionId){e.currentTarget.style.background='#3a3a4f';}},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{color:'#ffffff',fontWeight:'500',fontSize:'14px'},children:session.session_name}),/*#__PURE__*/_jsxs(\"div\",{style:{color:'#b8b8b8',fontSize:'12px',marginTop:'4px'},children:[session.message_count,\" messages \\u2022 \",new Date(session.updated_at).toLocaleDateString()]})]}),session.id===currentSessionId&&/*#__PURE__*/_jsx(\"span\",{style:{color:'#667eea',fontSize:'12px'},children:\"\\u2713 Active\"})]})},session.id))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"messages-container\",children:[messages.map(message=>/*#__PURE__*/_jsxs(\"div\",{className:`message ${message.isUser?'user':'ai'}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-content\",children:[message.isUser?/*#__PURE__*/_jsx(\"p\",{children:message.text}):/*#__PURE__*/_jsx(\"div\",{className:\"markdown-content\",children:/*#__PURE__*/_jsx(ReactMarkdown,{components:{h1:_ref=>{let{node,...props}=_ref;return/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'1.2em',margin:'8px 0'},...props});},h2:_ref2=>{let{node,...props}=_ref2;return/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'1.1em',margin:'8px 0'},...props});},h3:_ref3=>{let{node,...props}=_ref3;return/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:'1em',margin:'6px 0'},...props});},p:_ref4=>{let{node,...props}=_ref4;return/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0'},...props});},ul:_ref5=>{let{node,...props}=_ref5;return/*#__PURE__*/_jsx(\"ul\",{style:{margin:'8px 0',paddingLeft:'20px'},...props});},ol:_ref6=>{let{node,...props}=_ref6;return/*#__PURE__*/_jsx(\"ol\",{style:{margin:'8px 0',paddingLeft:'20px'},...props});},li:_ref7=>{let{node,...props}=_ref7;return/*#__PURE__*/_jsx(\"li\",{style:{margin:'2px 0'},...props});},strong:_ref8=>{let{node,...props}=_ref8;return/*#__PURE__*/_jsx(\"strong\",{style:{fontWeight:'bold'},...props});},em:_ref9=>{let{node,...props}=_ref9;return/*#__PURE__*/_jsx(\"em\",{style:{fontStyle:'italic'},...props});},blockquote:_ref0=>{let{node,...props}=_ref0;return/*#__PURE__*/_jsx(\"blockquote\",{style:{borderLeft:'3px solid #667eea',paddingLeft:'12px',margin:'8px 0',fontStyle:'italic'},...props});},code:_ref1=>{let{node,...props}=_ref1;return/*#__PURE__*/_jsx(\"code\",{style:{backgroundColor:'rgba(102, 126, 234, 0.1)',padding:'2px 4px',borderRadius:'3px',fontFamily:'monospace'},...props});}},children:message.text})}),message.image&&/*#__PURE__*/_jsx(\"img\",{src:message.image,alt:\"Uploaded\",className:\"message-image\",style:{maxWidth:'200px',maxHeight:'200px'}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-timestamp\",children:message.timestamp.toLocaleTimeString()})]},message.id)),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"message ai\",children:/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Thinking...\"})})}),isPrescriptionLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"message ai\",children:/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Analyzing prescription...\"})})})]}),showPrescriptionForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"prescription-form\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'#ffffff',marginBottom:'15px'},children:\"\\uD83D\\uDCCB Prescription Analysis\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'15px',marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#e0e0e0',fontSize:'14px',display:'block',marginBottom:'5px'},children:\"Patient Age (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:patientAge,onChange:e=>setPatientAge(e.target.value),placeholder:\"e.g., 5 years old\",style:{width:'100%',padding:'8px 12px',border:'2px solid #3a3a4f',borderRadius:'6px',background:'#2d2d3f',color:'#e0e0e0',fontSize:'14px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'#e0e0e0',fontSize:'14px',display:'block',marginBottom:'5px'},children:\"Medical Conditions (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:patientConditions,onChange:e=>setPatientConditions(e.target.value),placeholder:\"e.g., asthma, allergies\",style:{width:'100%',padding:'8px 12px',border:'2px solid #3a3a4f',borderRadius:'6px',background:'#2d2d3f',color:'#e0e0e0',fontSize:'14px'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleImageSelect,accept:\"image/*\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},style:{background:'#2d2d3f',color:'#667eea',border:'2px solid #3a3a4f',padding:'8px 16px',borderRadius:'6px',cursor:'pointer',fontSize:'14px'},children:\"\\uD83D\\uDCF7 Upload Prescription\"}),selectedImage&&/*#__PURE__*/_jsx(\"button\",{onClick:analyzePrescription,disabled:isPrescriptionLoading,style:{background:'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',color:'white',border:'none',padding:'8px 16px',borderRadius:'6px',cursor:'pointer',fontSize:'14px'},children:isPrescriptionLoading?'Analyzing...':'Analyze Prescription'})]}),selectedImage&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',display:'flex',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(selectedImage),alt:\"Selected\",style:{maxWidth:'80px',maxHeight:'80px',borderRadius:'4px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:removeSelectedImage,style:{background:'#ff4757',color:'white',border:'none',borderRadius:'50%',width:'20px',height:'20px',cursor:'pointer',fontSize:'10px'},children:\"\\u2715\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:inputText,onChange:e=>setInputText(e.target.value),onKeyPress:handleKeyPress,placeholder:t('chatPlaceholder'),className:\"text-input\",rows:3}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-actions\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleImageSelect,accept:\"image/*\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _fileInputRef$current2;return(_fileInputRef$current2=fileInputRef.current)===null||_fileInputRef$current2===void 0?void 0:_fileInputRef$current2.click();},className:\"upload-btn\",type:\"button\",children:\"\\uD83D\\uDCF7\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,disabled:isLoading||!inputText.trim()&&!selectedImage,className:\"send-btn\",children:t('send')})]})]}),selectedImage&&!showPrescriptionForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-image\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(selectedImage),alt:\"Selected\",style:{maxWidth:'100px',maxHeight:'100px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:removeSelectedImage,className:\"remove-image-btn\",children:\"\\u2715\"})]})]})]}),/*#__PURE__*/_jsx(LanguageSelector,{onLanguageSelect:handleLanguageSelect,isVisible:showLanguageSelector}),/*#__PURE__*/_jsx(Settings,{isVisible:showSettings,onClose:handleSettingsClose,currentLanguage:currentLanguage,onLanguageChange:handleLanguageChange,currentEmail:(user===null||user===void 0?void 0:user.email)||'',onEmailChange:handleEmailChange,onPasswordChange:handlePasswordChange})]});}export default App;","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","ReactMarkdown","Login","Register","LanguageSelector","Settings","languages","getTranslation","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","isLoginLoading","setIsLoginLoading","loginError","setLoginError","showRegister","setShowRegister","isRegisterLoading","setIsRegisterLoading","registerError","setRegisterError","currentLanguage","setCurrentLanguage","showLanguageSelector","setShowLanguageSelector","showSettings","setShowSettings","isFirstTimeUser","setIsFirstTimeUser","messages","setMessages","inputText","setInputText","isLoading","setIsLoading","selectedImage","setSelectedImage","showPrescriptionForm","setShowPrescriptionForm","patientAge","setPatientAge","patientConditions","setPatientConditions","isPrescriptionLoading","setIsPrescriptionLoading","chatSessions","setChatSessions","currentSessionId","setCurrentSessionId","currentSessionName","setCurrentSessionName","user","setUser","showSessionSelector","setShowSessionSelector","fileInputRef","token","localStorage","getItem","defaults","headers","common","fetchUserInfo","fetchChatSessions","savedLanguage","language","find","lang","code","userInfo","JSON","parse","error","console","response","get","data","handleLogin","email","password","formData","FormData","append","post","access_token","setItem","stringify","_error$response","_error$response$data","detail","handleRegister","fullName","_error$response2","_error$response2$data","handleLanguageSelect","handleLanguageChange","handleSettingsClose","handleEmailChange","newEmail","updatedUser","handlePasswordChange","currentPassword","newPassword","log","t","key","handleLogout","removeItem","createNewSession","newSession","id","session_name","loadSession","sessionId","sessionName","sessionMessages","map","msg","toString","text","content","isUser","is_user","timestamp","Date","created_at","isPrescription","is_prescription","sendMessage","trim","userMessage","now","image","URL","createObjectURL","undefined","prev","aiMessage","is_prescription_query","session_id","errorMessage","analyzePrescription","handleImageSelect","event","_event$target$files","file","target","files","removeSelectedImage","current","value","handleKeyPress","shiftKey","preventDefault","onRegister","onSwitchToLogin","onLogin","onSwitchToRegister","className","children","style","display","justifyContent","alignItems","fontSize","opacity","marginTop","full_name","gap","onClick","background","border","color","padding","borderRadius","cursor","transition","onMouseOver","e","currentTarget","onMouseOut","nativeName","textAlign","borderBottom","maxHeight","overflowY","marginBottom","margin","length","flexDirection","session","fontWeight","message_count","updated_at","toLocaleDateString","message","components","h1","_ref","node","props","h2","_ref2","h3","_ref3","p","_ref4","ul","_ref5","paddingLeft","ol","_ref6","li","_ref7","strong","_ref8","em","_ref9","fontStyle","blockquote","_ref0","borderLeft","_ref1","backgroundColor","fontFamily","src","alt","maxWidth","toLocaleTimeString","flex","type","onChange","placeholder","width","ref","accept","_fileInputRef$current","click","disabled","height","onKeyPress","rows","_fileInputRef$current2","onLanguageSelect","isVisible","onClose","onLanguageChange","currentEmail","onEmailChange","onPasswordChange"],"sources":["/Users/devanshupadhyay/PDs/IBM/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport axios from 'axios';\nimport ReactMarkdown from 'react-markdown';\nimport Login from './Login';\nimport Register from './Register';\nimport LanguageSelector from './LanguageSelector';\nimport Settings from './Settings';\nimport { languages, Language, getTranslation } from './languages';\nimport './App.css';\n\ninterface Message {\n  id: string;\n  text: string;\n  isUser: boolean;\n  timestamp: Date;\n  image?: string;\n  isPrescription?: boolean;\n}\n\ninterface ChatSession {\n  id: number;\n  session_name: string;\n  created_at: string;\n  updated_at: string;\n  message_count: number;\n}\n\ninterface User {\n  id: number;\n  email: string;\n  full_name: string;\n}\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [isLoginLoading, setIsLoginLoading] = useState(false);\n  const [loginError, setLoginError] = useState('');\n  const [showRegister, setShowRegister] = useState(false);\n  const [isRegisterLoading, setIsRegisterLoading] = useState(false);\n  const [registerError, setRegisterError] = useState('');\n  const [currentLanguage, setCurrentLanguage] = useState<Language>(languages[0]); // Default to English\n  const [showLanguageSelector, setShowLanguageSelector] = useState(false);\n  const [showSettings, setShowSettings] = useState(false);\n  const [isFirstTimeUser, setIsFirstTimeUser] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [inputText, setInputText] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedImage, setSelectedImage] = useState<File | null>(null);\n  const [showPrescriptionForm, setShowPrescriptionForm] = useState(false);\n  const [patientAge, setPatientAge] = useState('');\n  const [patientConditions, setPatientConditions] = useState('');\n  const [isPrescriptionLoading, setIsPrescriptionLoading] = useState(false);\n  const [chatSessions, setChatSessions] = useState<ChatSession[]>([]);\n  const [currentSessionId, setCurrentSessionId] = useState<number | null>(null);\n  const [currentSessionName, setCurrentSessionName] = useState<string>('');\n  const [user, setUser] = useState<User | null>(null);\n  const [showSessionSelector, setShowSessionSelector] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Configure axios defaults\n  useEffect(() => {\n    const token = localStorage.getItem('access_token');\n    if (token) {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      setIsAuthenticated(true);\n      fetchUserInfo();\n      fetchChatSessions();\n    }\n  }, []);\n\n  // Initialize language and check for first-time user\n  useEffect(() => {\n    const savedLanguage = localStorage.getItem('user_language');\n    if (savedLanguage) {\n      const language = languages.find(lang => lang.code === savedLanguage);\n      if (language) {\n        setCurrentLanguage(language);\n      }\n    } else if (isAuthenticated) {\n      // Show language selector for first-time authenticated users\n      setIsFirstTimeUser(true);\n      setShowLanguageSelector(true);\n    }\n  }, [isAuthenticated]);\n\n  const fetchUserInfo = async () => {\n    try {\n      // For now, we'll get user info from the login response\n      // In a real app, you'd have a /me endpoint\n      const userInfo = localStorage.getItem('user_info');\n      if (userInfo) {\n        setUser(JSON.parse(userInfo));\n      }\n    } catch (error) {\n      console.error('Error fetching user info:', error);\n    }\n  };\n\n  const fetchChatSessions = async () => {\n    try {\n      const response = await axios.get('http://localhost:8000/chat/sessions');\n      setChatSessions(response.data);\n    } catch (error) {\n      console.error('Error fetching chat sessions:', error);\n    }\n  };\n\n  const handleLogin = async (email: string, password: string) => {\n    setIsLoginLoading(true);\n    setLoginError('');\n    \n    try {\n      const formData = new FormData();\n      formData.append('email', email);\n      formData.append('password', password);\n\n      const response = await axios.post('http://localhost:8000/auth/login', formData);\n      \n      const { access_token, user: userInfo } = response.data;\n      \n      // Store token and user info\n      localStorage.setItem('access_token', access_token);\n      localStorage.setItem('user_info', JSON.stringify(userInfo));\n      \n      // Set axios default header\n      axios.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      \n      setIsAuthenticated(true);\n      setUser(userInfo);\n      setLoginError('');\n      \n      // Fetch chat sessions\n      await fetchChatSessions();\n      \n    } catch (error: any) {\n      console.error('Login error:', error);\n      setLoginError(error.response?.data?.detail || 'Login failed. Please try again.');\n    }\n    \n    setIsLoginLoading(false);\n  };\n\n  const handleRegister = async (email: string, password: string, fullName: string) => {\n    setIsRegisterLoading(true);\n    setRegisterError('');\n    \n    try {\n      const formData = new FormData();\n      formData.append('email', email);\n      formData.append('password', password);\n      formData.append('full_name', fullName);\n\n      const response = await axios.post('http://localhost:8000/auth/register', formData);\n      \n      const { access_token, user: userInfo } = response.data;\n      \n      // Store token and user info\n      localStorage.setItem('access_token', access_token);\n      localStorage.setItem('user_info', JSON.stringify(userInfo));\n      \n      // Set axios default header\n      axios.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n      \n      setIsAuthenticated(true);\n      setUser(userInfo);\n      setRegisterError('');\n      setShowRegister(false);\n      \n      // Check if this is a first-time user\n      const savedLanguage = localStorage.getItem('user_language');\n      if (!savedLanguage) {\n        setIsFirstTimeUser(true);\n        setShowLanguageSelector(true);\n      }\n      \n      // Fetch chat sessions\n      await fetchChatSessions();\n      \n    } catch (error: any) {\n      console.error('Registration error:', error);\n      setRegisterError(error.response?.data?.detail || 'Registration failed. Please try again.');\n    }\n    \n    setIsRegisterLoading(false);\n  };\n\n  const handleLanguageSelect = (language: Language) => {\n    setCurrentLanguage(language);\n    localStorage.setItem('user_language', language.code);\n    setShowLanguageSelector(false);\n    setIsFirstTimeUser(false);\n  };\n\n  const handleLanguageChange = (language: Language) => {\n    setCurrentLanguage(language);\n    localStorage.setItem('user_language', language.code);\n  };\n\n  const handleSettingsClose = () => {\n    setShowSettings(false);\n  };\n\n  const handleEmailChange = (newEmail: string) => {\n    // Update user email (in a real app, this would call an API)\n    if (user) {\n      const updatedUser = { ...user, email: newEmail };\n      setUser(updatedUser);\n      localStorage.setItem('user_info', JSON.stringify(updatedUser));\n    }\n  };\n\n  const handlePasswordChange = (currentPassword: string, newPassword: string) => {\n    // Update password (in a real app, this would call an API)\n    console.log('Password change requested');\n  };\n\n  // Translation helper function\n  const t = (key: string) => getTranslation(currentLanguage.code, key);\n\n  const handleLogout = () => {\n    localStorage.removeItem('access_token');\n    localStorage.removeItem('user_info');\n    delete axios.defaults.headers.common['Authorization'];\n    \n    setIsAuthenticated(false);\n    setUser(null);\n    setMessages([]);\n    setInputText('');\n    setSelectedImage(null);\n    setShowPrescriptionForm(false);\n    setChatSessions([]);\n    setCurrentSessionId(null);\n    setCurrentSessionName('');\n  };\n\n  const createNewSession = async () => {\n    try {\n      const formData = new FormData();\n      formData.append('session_name', 'New Chat');\n      \n      const response = await axios.post('http://localhost:8000/chat/sessions', formData);\n      const newSession = response.data;\n      \n      setCurrentSessionId(newSession.id);\n      setCurrentSessionName(newSession.session_name);\n      setMessages([]);\n      setShowSessionSelector(false);\n      \n      // Refresh sessions list\n      await fetchChatSessions();\n      \n    } catch (error) {\n      console.error('Error creating new session:', error);\n    }\n  };\n\n  const loadSession = async (sessionId: number, sessionName: string) => {\n    try {\n      const response = await axios.get(`http://localhost:8000/chat/sessions/${sessionId}/messages`);\n      const sessionMessages = response.data.map((msg: any) => ({\n        id: msg.id.toString(),\n        text: msg.content,\n        isUser: msg.is_user,\n        timestamp: new Date(msg.created_at),\n        isPrescription: msg.is_prescription\n      }));\n      \n      setMessages(sessionMessages);\n      setCurrentSessionId(sessionId);\n      setCurrentSessionName(sessionName);\n      setShowSessionSelector(false);\n      \n    } catch (error) {\n      console.error('Error loading session:', error);\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!inputText.trim() && !selectedImage) return;\n\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      text: inputText,\n      isUser: true,\n      timestamp: new Date(),\n      image: selectedImage ? URL.createObjectURL(selectedImage) : undefined\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setIsLoading(true);\n\n    try {\n      const formData = new FormData();\n      formData.append('message', inputText);\n      if (selectedImage) {\n        formData.append('image', selectedImage);\n      }\n      if (currentSessionId) {\n        formData.append('session_id', currentSessionId.toString());\n      }\n\n      const response = await axios.post('http://localhost:8000/chat/', formData);\n\n      const aiMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        text: response.data.response,\n        isUser: false,\n        timestamp: new Date(),\n        isPrescription: response.data.is_prescription_query\n      };\n\n      setMessages(prev => [...prev, aiMessage]);\n      \n      // Update session info if this is a new session\n      if (response.data.session_id && !currentSessionId) {\n        setCurrentSessionId(response.data.session_id);\n        setCurrentSessionName(response.data.session_name);\n        await fetchChatSessions();\n      }\n      \n    } catch (error) {\n      console.error('Error sending message:', error);\n      const errorMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        text: 'Sorry, there was an error processing your request. Please try again.',\n        isUser: false,\n        timestamp: new Date(),\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n      setInputText('');\n      setSelectedImage(null);\n    }\n  };\n\n  const analyzePrescription = async () => {\n    if (!selectedImage) return;\n\n    setIsPrescriptionLoading(true);\n\n    try {\n      const formData = new FormData();\n      formData.append('image', selectedImage);\n      if (patientAge) formData.append('patient_age', patientAge);\n      if (patientConditions) formData.append('patient_conditions', patientConditions);\n      if (currentSessionId) {\n        formData.append('session_id', currentSessionId.toString());\n      }\n\n      const response = await axios.post('http://localhost:8000/prescription-analysis/', formData);\n\n      const userMessage: Message = {\n        id: Date.now().toString(),\n        text: `Prescription Analysis Request${patientAge ? ` (Age: ${patientAge})` : ''}${patientConditions ? ` (Conditions: ${patientConditions})` : ''}`,\n        isUser: true,\n        timestamp: new Date(),\n        image: URL.createObjectURL(selectedImage),\n        isPrescription: true\n      };\n\n      const aiMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        text: response.data.response,\n        isUser: false,\n        timestamp: new Date(),\n        isPrescription: true\n      };\n\n      setMessages(prev => [...prev, userMessage, aiMessage]);\n      setShowPrescriptionForm(false);\n      setSelectedImage(null);\n      setPatientAge('');\n      setPatientConditions('');\n      \n      // Update session info if this is a new session\n      if (response.data.session_id && !currentSessionId) {\n        setCurrentSessionId(response.data.session_id);\n        setCurrentSessionName(response.data.session_name);\n        await fetchChatSessions();\n      }\n      \n    } catch (error) {\n      console.error('Error analyzing prescription:', error);\n      const errorMessage: Message = {\n        id: (Date.now() + 1).toString(),\n        text: 'Sorry, there was an error analyzing the prescription. Please try again or consult with a pharmacist.',\n        isUser: false,\n        timestamp: new Date(),\n        isPrescription: true\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsPrescriptionLoading(false);\n    }\n  };\n\n  const handleImageSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setSelectedImage(file);\n    }\n  };\n\n  const removeSelectedImage = () => {\n    setSelectedImage(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleKeyPress = (event: React.KeyboardEvent) => {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      sendMessage();\n    }\n  };\n\n  if (!isAuthenticated) {\n    if (showRegister) {\n      return (\n        <Register\n          onRegister={handleRegister}\n          onSwitchToLogin={() => setShowRegister(false)}\n          isLoading={isRegisterLoading}\n          error={registerError}\n          currentLanguage={currentLanguage}\n          t={t}\n        />\n      );\n    }\n    \n    return (\n      <Login \n        onLogin={handleLogin}\n        onSwitchToRegister={() => setShowRegister(true)}\n        isLoading={isLoginLoading}\n        error={loginError}\n        currentLanguage={currentLanguage}\n        t={t}\n      />\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <div className=\"chat-container\">\n        <div className=\"chat-header\">\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <div>\n              <h1>{t('loginTitle')}</h1>\n              <p>Ask me about your child's health concerns & medication safety</p>\n              {user && (\n                <p style={{ fontSize: '12px', opacity: 0.8, marginTop: '5px' }}>\n                  Welcome, {user.full_name}\n                </p>\n              )}\n            </div>\n            <div style={{ display: 'flex', gap: '10px' }}>\n              <button \n                onClick={() => setShowLanguageSelector(true)}\n                style={{\n                  background: 'rgba(255, 255, 255, 0.1)',\n                  border: '1px solid rgba(255, 255, 255, 0.2)',\n                  color: 'white',\n                  padding: '8px 16px',\n                  borderRadius: '8px',\n                  cursor: 'pointer',\n                  fontSize: '12px',\n                  transition: 'all 0.2s'\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.2)';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)';\n                }}\n              >\n                🌍 {currentLanguage.nativeName}\n              </button>\n              <button \n                onClick={() => setShowSettings(true)}\n                style={{\n                  background: 'rgba(255, 255, 255, 0.1)',\n                  border: '1px solid rgba(255, 255, 255, 0.2)',\n                  color: 'white',\n                  padding: '8px 16px',\n                  borderRadius: '8px',\n                  cursor: 'pointer',\n                  fontSize: '12px',\n                  transition: 'all 0.2s'\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.2)';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)';\n                }}\n              >\n                ⚙️ Settings\n              </button>\n              <button \n                onClick={() => setShowSessionSelector(!showSessionSelector)}\n                style={{\n                  background: 'rgba(255, 255, 255, 0.1)',\n                  border: '1px solid rgba(255, 255, 255, 0.2)',\n                  color: 'white',\n                  padding: '8px 16px',\n                  borderRadius: '8px',\n                  cursor: 'pointer',\n                  fontSize: '12px',\n                  transition: 'all 0.2s'\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.2)';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)';\n                }}\n              >\n                💬 Sessions\n              </button>\n              <button \n                onClick={() => setShowPrescriptionForm(!showPrescriptionForm)}\n                style={{\n                  background: 'rgba(255, 255, 255, 0.1)',\n                  border: '1px solid rgba(255, 255, 255, 0.2)',\n                  color: 'white',\n                  padding: '8px 16px',\n                  borderRadius: '8px',\n                  cursor: 'pointer',\n                  fontSize: '12px',\n                  transition: 'all 0.2s'\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.2)';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)';\n                }}\n              >\n                📋 Prescription Analysis\n              </button>\n              <button \n                onClick={handleLogout}\n                style={{\n                  background: 'rgba(255, 255, 255, 0.1)',\n                  border: '1px solid rgba(255, 255, 255, 0.2)',\n                  color: 'white',\n                  padding: '8px 16px',\n                  borderRadius: '8px',\n                  cursor: 'pointer',\n                  fontSize: '12px',\n                  transition: 'all 0.2s'\n                }}\n                onMouseOver={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.2)';\n                }}\n                onMouseOut={(e) => {\n                  e.currentTarget.style.background = 'rgba(255, 255, 255, 0.1)';\n                }}\n              >\n                Logout\n              </button>\n            </div>\n          </div>\n          \n          {currentSessionName && (\n            <div style={{ marginTop: '10px', textAlign: 'left' }}>\n              <span style={{ \n                background: 'rgba(255, 255, 255, 0.1)', \n                padding: '4px 8px', \n                borderRadius: '4px',\n                fontSize: '12px'\n              }}>\n                Current Session: {currentSessionName}\n              </span>\n            </div>\n          )}\n        </div>\n        \n        {showSessionSelector && (\n          <div className=\"session-selector\">\n            <div style={{ \n              background: '#2d2d3f', \n              padding: '20px', \n              borderBottom: '1px solid #3a3a4f',\n              maxHeight: '300px',\n              overflowY: 'auto'\n            }}>\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px' }}>\n                <h3 style={{ color: '#ffffff', margin: 0 }}>Chat Sessions</h3>\n                <button \n                  onClick={createNewSession}\n                  style={{\n                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                    color: 'white',\n                    border: 'none',\n                    padding: '8px 16px',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    fontSize: '12px'\n                  }}\n                >\n                  + New Session\n                </button>\n              </div>\n              \n              {chatSessions.length === 0 ? (\n                <p style={{ color: '#b8b8b8', textAlign: 'center' }}>No chat sessions yet. Start a new conversation!</p>\n              ) : (\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\n                  {chatSessions.map((session) => (\n                    <div \n                      key={session.id}\n                      onClick={() => loadSession(session.id, session.session_name)}\n                      style={{\n                        background: session.id === currentSessionId ? 'rgba(102, 126, 234, 0.2)' : '#3a3a4f',\n                        padding: '12px',\n                        borderRadius: '8px',\n                        cursor: 'pointer',\n                        border: session.id === currentSessionId ? '1px solid #667eea' : '1px solid #4a4a5f',\n                        transition: 'all 0.2s'\n                      }}\n                      onMouseOver={(e) => {\n                        if (session.id !== currentSessionId) {\n                          e.currentTarget.style.background = '#4a4a5f';\n                        }\n                      }}\n                      onMouseOut={(e) => {\n                        if (session.id !== currentSessionId) {\n                          e.currentTarget.style.background = '#3a3a4f';\n                        }\n                      }}\n                    >\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                        <div>\n                          <div style={{ color: '#ffffff', fontWeight: '500', fontSize: '14px' }}>\n                            {session.session_name}\n                          </div>\n                          <div style={{ color: '#b8b8b8', fontSize: '12px', marginTop: '4px' }}>\n                            {session.message_count} messages • {new Date(session.updated_at).toLocaleDateString()}\n                          </div>\n                        </div>\n                        {session.id === currentSessionId && (\n                          <span style={{ color: '#667eea', fontSize: '12px' }}>✓ Active</span>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        \n        <div className=\"messages-container\">\n          {messages.map((message) => (\n            <div key={message.id} className={`message ${message.isUser ? 'user' : 'ai'}`}>\n              <div className=\"message-content\">\n                {message.isUser ? (\n                  <p>{message.text}</p>\n                ) : (\n                  <div className=\"markdown-content\">\n                    <ReactMarkdown \n                      components={{\n                        h1: ({node, ...props}) => <h1 style={{fontSize: '1.2em', margin: '8px 0'}} {...props} />,\n                        h2: ({node, ...props}) => <h2 style={{fontSize: '1.1em', margin: '8px 0'}} {...props} />,\n                        h3: ({node, ...props}) => <h3 style={{fontSize: '1em', margin: '6px 0'}} {...props} />,\n                        p: ({node, ...props}) => <p style={{margin: '4px 0'}} {...props} />,\n                        ul: ({node, ...props}) => <ul style={{margin: '8px 0', paddingLeft: '20px'}} {...props} />,\n                        ol: ({node, ...props}) => <ol style={{margin: '8px 0', paddingLeft: '20px'}} {...props} />,\n                        li: ({node, ...props}) => <li style={{margin: '2px 0'}} {...props} />,\n                        strong: ({node, ...props}) => <strong style={{fontWeight: 'bold'}} {...props} />,\n                        em: ({node, ...props}) => <em style={{fontStyle: 'italic'}} {...props} />,\n                        blockquote: ({node, ...props}) => (\n                          <blockquote style={{\n                            borderLeft: '3px solid #667eea',\n                            paddingLeft: '12px',\n                            margin: '8px 0',\n                            fontStyle: 'italic'\n                          }} {...props} />\n                        ),\n                        code: ({node, ...props}) => (\n                          <code style={{\n                            backgroundColor: 'rgba(102, 126, 234, 0.1)',\n                            padding: '2px 4px',\n                            borderRadius: '3px',\n                            fontFamily: 'monospace'\n                          }} {...props} />\n                        )\n                      }}\n                    >\n                      {message.text}\n                    </ReactMarkdown>\n                  </div>\n                )}\n                {message.image && (\n                  <img \n                    src={message.image} \n                    alt=\"Uploaded\" \n                    className=\"message-image\"\n                    style={{ maxWidth: '200px', maxHeight: '200px' }}\n                  />\n                )}\n              </div>\n              <div className=\"message-timestamp\">\n                {message.timestamp.toLocaleTimeString()}\n              </div>\n            </div>\n          ))}\n          {isLoading && (\n            <div className=\"message ai\">\n              <div className=\"message-content\">\n                <p>Thinking...</p>\n              </div>\n            </div>\n          )}\n          {isPrescriptionLoading && (\n            <div className=\"message ai\">\n              <div className=\"message-content\">\n                <p>Analyzing prescription...</p>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {showPrescriptionForm && (\n          <div className=\"prescription-form\">\n            <h3 style={{ color: '#ffffff', marginBottom: '15px' }}>📋 Prescription Analysis</h3>\n            <div style={{ display: 'flex', gap: '15px', marginBottom: '15px' }}>\n              <div style={{ flex: 1 }}>\n                <label style={{ color: '#e0e0e0', fontSize: '14px', display: 'block', marginBottom: '5px' }}>\n                  Patient Age (optional)\n                </label>\n                <input\n                  type=\"text\"\n                  value={patientAge}\n                  onChange={(e) => setPatientAge(e.target.value)}\n                  placeholder=\"e.g., 5 years old\"\n                  style={{\n                    width: '100%',\n                    padding: '8px 12px',\n                    border: '2px solid #3a3a4f',\n                    borderRadius: '6px',\n                    background: '#2d2d3f',\n                    color: '#e0e0e0',\n                    fontSize: '14px'\n                  }}\n                />\n              </div>\n              <div style={{ flex: 1 }}>\n                <label style={{ color: '#e0e0e0', fontSize: '14px', display: 'block', marginBottom: '5px' }}>\n                  Medical Conditions (optional)\n                </label>\n                <input\n                  type=\"text\"\n                  value={patientConditions}\n                  onChange={(e) => setPatientConditions(e.target.value)}\n                  placeholder=\"e.g., asthma, allergies\"\n                  style={{\n                    width: '100%',\n                    padding: '8px 12px',\n                    border: '2px solid #3a3a4f',\n                    borderRadius: '6px',\n                    background: '#2d2d3f',\n                    color: '#e0e0e0',\n                    fontSize: '14px'\n                  }}\n                />\n              </div>\n            </div>\n            <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={handleImageSelect}\n                accept=\"image/*\"\n                style={{ display: 'none' }}\n              />\n              <button \n                onClick={() => fileInputRef.current?.click()}\n                style={{\n                  background: '#2d2d3f',\n                  color: '#667eea',\n                  border: '2px solid #3a3a4f',\n                  padding: '8px 16px',\n                  borderRadius: '6px',\n                  cursor: 'pointer',\n                  fontSize: '14px'\n                }}\n              >\n                📷 Upload Prescription\n              </button>\n              {selectedImage && (\n                <button \n                  onClick={analyzePrescription}\n                  disabled={isPrescriptionLoading}\n                  style={{\n                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                    color: 'white',\n                    border: 'none',\n                    padding: '8px 16px',\n                    borderRadius: '6px',\n                    cursor: 'pointer',\n                    fontSize: '14px'\n                  }}\n                >\n                  {isPrescriptionLoading ? 'Analyzing...' : 'Analyze Prescription'}\n                </button>\n              )}\n            </div>\n            {selectedImage && (\n              <div style={{ marginTop: '10px', display: 'flex', alignItems: 'center', gap: '10px' }}>\n                <img \n                  src={URL.createObjectURL(selectedImage)} \n                  alt=\"Selected\" \n                  style={{ maxWidth: '80px', maxHeight: '80px', borderRadius: '4px' }}\n                />\n                <button \n                  onClick={removeSelectedImage}\n                  style={{\n                    background: '#ff4757',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '50%',\n                    width: '20px',\n                    height: '20px',\n                    cursor: 'pointer',\n                    fontSize: '10px'\n                  }}\n                >\n                  ✕\n                </button>\n              </div>\n            )}\n          </div>\n        )}\n\n        <div className=\"input-container\">\n          <div className=\"input-wrapper\">\n            <textarea\n              value={inputText}\n              onChange={(e) => setInputText(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder={t('chatPlaceholder')}\n              className=\"text-input\"\n              rows={3}\n            />\n            <div className=\"input-actions\">\n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={handleImageSelect}\n                accept=\"image/*\"\n                style={{ display: 'none' }}\n              />\n              <button \n                onClick={() => fileInputRef.current?.click()}\n                className=\"upload-btn\"\n                type=\"button\"\n              >\n                📷\n              </button>\n              <button \n                onClick={sendMessage}\n                disabled={isLoading || (!inputText.trim() && !selectedImage)}\n                className=\"send-btn\"\n              >\n                {t('send')}\n              </button>\n            </div>\n          </div>\n          \n          {selectedImage && !showPrescriptionForm && (\n            <div className=\"selected-image\">\n              <img \n                src={URL.createObjectURL(selectedImage)} \n                alt=\"Selected\" \n                style={{ maxWidth: '100px', maxHeight: '100px' }}\n              />\n              <button onClick={removeSelectedImage} className=\"remove-image-btn\">\n                ✕\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Language Selector Modal */}\n      <LanguageSelector\n        onLanguageSelect={handleLanguageSelect}\n        isVisible={showLanguageSelector}\n      />\n      \n      {/* Settings Modal */}\n      <Settings\n        isVisible={showSettings}\n        onClose={handleSettingsClose}\n        currentLanguage={currentLanguage}\n        onLanguageChange={handleLanguageChange}\n        currentEmail={user?.email || ''}\n        onEmailChange={handleEmailChange}\n        onPasswordChange={handlePasswordChange}\n      />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}